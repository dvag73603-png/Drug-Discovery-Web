<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drug Discovery Prediction</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="hero-section">
        <svg class="molecule-decoration molecule-1" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
            <circle cx="50" cy="50" r="12" fill="#ff6b35" opacity="0.6"/>
            <circle cx="100" cy="30" r="12" fill="#ff9a56" opacity="0.6"/>
            <circle cx="150" cy="50" r="12" fill="#ff6b35" opacity="0.6"/>
            <circle cx="100" cy="90" r="12" fill="#ff9a56" opacity="0.6"/>
            <circle cx="130" cy="120" r="12" fill="#ff6b35" opacity="0.6"/>
            <line x1="50" y1="50" x2="100" y2="30" stroke="#ff6b35" stroke-width="3" opacity="0.4"/>
            <line x1="100" y1="30" x2="150" y2="50" stroke="#ff6b35" stroke-width="3" opacity="0.4"/>
            <line x1="100" y1="30" x2="100" y2="90" stroke="#ff6b35" stroke-width="3" opacity="0.4"/>
            <line x1="100" y1="90" x2="130" y2="120" stroke="#ff6b35" stroke-width="3" opacity="0.4"/>
        </svg>
        
        <svg class="molecule-decoration molecule-2" viewBox="0 0 150 150" xmlns="http://www.w3.org/2000/svg">
            <circle cx="75" cy="40" r="10" fill="#ff9a56" opacity="0.5"/>
            <circle cx="40" cy="80" r="10" fill="#ff6b35" opacity="0.5"/>
            <circle cx="110" cy="80" r="10" fill="#ff6b35" opacity="0.5"/>
            <circle cx="75" cy="120" r="10" fill="#ff9a56" opacity="0.5"/>
            <line x1="75" y1="40" x2="40" y2="80" stroke="#ff6b35" stroke-width="2" opacity="0.3"/>
            <line x1="75" y1="40" x2="110" y2="80" stroke="#ff6b35" stroke-width="2" opacity="0.3"/>
            <line x1="40" y1="80" x2="75" y2="120" stroke="#ff6b35" stroke-width="2" opacity="0.3"/>
            <line x1="110" y1="80" x2="75" y2="120" stroke="#ff6b35" stroke-width="2" opacity="0.3"/>
        </svg>

        <div class="container">
            <div class="header-content">
                <div class="molecule-icon">
                    <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="20" cy="30" r="8" fill="#ff6b35"/>
                        <circle cx="50" cy="20" r="8" fill="#ff9a56"/>
                        <circle cx="80" cy="30" r="8" fill="#ff6b35"/>
                        <circle cx="35" cy="60" r="8" fill="#ff9a56"/>
                        <circle cx="65" cy="60" r="8" fill="#ff6b35"/>
                        <circle cx="50" cy="85" r="8" fill="#ff9a56"/>
                        <line x1="20" y1="30" x2="50" y2="20" stroke="#333" stroke-width="2"/>
                        <line x1="50" y1="20" x2="80" y2="30" stroke="#333" stroke-width="2"/>
                        <line x1="20" y1="30" x2="35" y2="60" stroke="#333" stroke-width="2"/>
                        <line x1="50" y1="20" x2="35" y2="60" stroke="#333" stroke-width="2"/>
                        <line x1="50" y1="20" x2="65" y2="60" stroke="#333" stroke-width="2"/>
                        <line x1="80" y1="30" x2="65" y2="60" stroke="#333" stroke-width="2"/>
                        <line x1="35" y1="60" x2="50" y2="85" stroke="#333" stroke-width="2"/>
                        <line x1="65" y1="60" x2="50" y2="85" stroke="#333" stroke-width="2"/>
                    </svg>
                </div>
                <h1 class="main-heading">🧪 Drug Discovery Prediction</h1>
                <p class="subtitle">Predict whether a compound is Active or Inactive based on chemical properties</p>
            </div>

            <div class="prediction-card">
                <form id="predictionForm">
                    <div class="input-row">
                        <div class="input-group">
                            <label for="molecular_weight">Molecular Weight</label>
                            <input type="number" id="molecular_weight" name="molecular_weight" 
                                   step="0.01" min="0" required placeholder="e.g., 350">
                        </div>

                        <div class="input-group">
                            <label for="logp">LogP Value</label>
                            <input type="number" id="logp" name="logp" 
                                   step="0.01" required placeholder="e.g., 2.5">
                        </div>

                        <div class="input-group">
                            <label for="h_donors">Hydrogen Donors</label>
                            <input type="number" id="h_donors" name="h_donors" 
                                   min="0" step="1" required placeholder="e.g., 3">
                        </div>

                        <div class="input-group">
                            <label for="h_acceptors">Hydrogen Acceptors</label>
                            <input type="number" id="h_acceptors" name="h_acceptors" 
                                   min="0" step="1" required placeholder="e.g., 6">
                        </div>
                    </div>

                    <div class="button-container">
                        <button type="submit" class="predict-btn">Predict</button>
                    </div>
                </form>
            </div>

            <div id="resultSection" class="result-section hidden">
                <div class="result-card">
                    <div class="result-icon" id="resultIcon">💊</div>
                    <h2 class="result-title">Prediction Result</h2>
                    <div id="predictionResult" class="prediction-text"></div>
                    <div id="confidenceResult" class="confidence-text"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="about-section">
        <div class="container">
            <div class="about-content">
                <div class="about-header">
                    <h2>About Drug Discovery</h2>
                    <div class="decorative-line"></div>
                </div>
                
                <div class="about-grid">
                    <div class="about-card">
                        <svg class="card-svg-icon" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                            <rect x="20" y="40" width="60" height="40" rx="5" fill="none" stroke="#ff6b35" stroke-width="3"/>
                            <circle cx="30" cy="55" r="3" fill="#ff6b35"/>
                            <circle cx="50" cy="55" r="3" fill="#ff6b35"/>
                            <circle cx="70" cy="55" r="3" fill="#ff6b35"/>
                            <rect x="25" y="25" width="50" height="10" rx="2" fill="#ff9a56"/>
                            <line x1="35" y1="30" x2="35" y2="20" stroke="#ff6b35" stroke-width="2"/>
                            <circle cx="35" cy="15" r="4" fill="#ff6b35"/>
                        </svg>
                        <h3>Machine Learning</h3>
                        <p>This web app uses advanced machine learning algorithms with RandomForest classifier to predict drug activity with 84% accuracy.</p>
                    </div>

                    <div class="about-card">
                        <svg class="card-svg-icon" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                            <ellipse cx="50" cy="70" rx="25" ry="12" fill="none" stroke="#ff6b35" stroke-width="2"/>
                            <path d="M 25 70 Q 30 50 50 35 Q 70 50 75 70" fill="none" stroke="#ff6b35" stroke-width="3"/>
                            <circle cx="50" cy="35" r="8" fill="#ff9a56"/>
                            <line x1="50" y1="35" x2="50" y2="15" stroke="#ff6b35" stroke-width="2"/>
                            <line x1="45" y1="20" x2="55" y2="20" stroke="#ff6b35" stroke-width="2"/>
                            <line x1="42" y1="25" x2="58" y2="25" stroke="#ff6b35" stroke-width="2"/>
                        </svg>
                        <h3>Lipinski's Rule of Five</h3>
                        <p>Our prediction model is based on Lipinski's Rule of Five, which evaluates drug-likeness based on molecular properties like weight, LogP, and hydrogen bonding.</p>
                    </div>

                    <div class="about-card">
                        <svg class="card-svg-icon" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="50" cy="50" r="30" fill="none" stroke="#ff6b35" stroke-width="3"/>
                            <circle cx="35" cy="35" r="6" fill="#ff9a56"/>
                            <circle cx="65" cy="35" r="6" fill="#ff9a56"/>
                            <circle cx="50" cy="60" r="6" fill="#ff9a56"/>
                            <circle cx="35" cy="65" r="6" fill="#ff6b35"/>
                            <circle cx="65" cy="65" r="6" fill="#ff6b35"/>
                            <line x1="35" y1="35" x2="50" y2="60" stroke="#ff6b35" stroke-width="2"/>
                            <line x1="65" y1="35" x2="50" y2="60" stroke="#ff6b35" stroke-width="2"/>
                            <line x1="50" y1="60" x2="35" y2="65" stroke="#ff6b35" stroke-width="2"/>
                            <line x1="50" y1="60" x2="65" y2="65" stroke="#ff6b35" stroke-width="2"/>
                        </svg>
                        <h3>Active Drug Candidate</h3>
                        <p>The system determines whether a compound can be an active drug candidate by analyzing its chemical properties and comparing them against successful drug patterns.</p>
                    </div>
                </div>

                <div class="info-banner">
                    <p><strong>How it works:</strong> Enter the four key molecular properties of your compound. Our trained model analyzes these features to predict whether the compound is likely to be an Active or Inactive drug candidate. The prediction comes with a confidence score to help you assess the reliability of the result.</p>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <p>🧬 Drug Discovery Prediction System | Machine Learning for Pharmaceutical Research</p>
        </div>
    </footer>

    <script>
        document.getElementById('predictionForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = {
                molecular_weight: document.getElementById('molecular_weight').value,
                logp: document.getElementById('logp').value,
                h_donors: document.getElementById('h_donors').value,
                h_acceptors: document.getElementById('h_acceptors').value
            };

            try {
                const response = await fetch('/predict', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });

                const result = await response.json();

                if (result.success) {
                    const resultSection = document.getElementById('resultSection');
                    const predictionResult = document.getElementById('predictionResult');
                    const confidenceResult = document.getElementById('confidenceResult');
                    const resultIcon = document.getElementById('resultIcon');
                    
                    predictionResult.textContent = result.prediction;
                    confidenceResult.textContent = `Confidence: ${result.confidence}`;
                    
                    if (result.prediction === 'Active Drug') {
                        resultSection.className = 'result-section active';
                        resultIcon.textContent = '✅';
                    } else {
                        resultSection.className = 'result-section inactive';
                        resultIcon.textContent = '❌';
                    }
                    
                    resultSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                } else {
                    alert('Error: ' + result.error);
                }
            } catch (error) {
                alert('Error making prediction. Please try again.');
                console.error('Error:', error);
            }
        });
    </script>
</body>
</html>
